<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIVERSE - University Event Management</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #1a252f;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            overflow-x: hidden;
        }
        
        /* Header styling */
        header {
            background-color: var(--primary);
            color: white;
            position: fixed;
            width: 100%;
            z-index: 1000;
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        
        header.scrolled {
            background-color: rgba(44, 62, 80, 0.95);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
        }
        
        .logo {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        .logo span {
            color: var(--secondary);
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 2rem;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            position: relative;
            padding: 0.5rem 0;
            transition: color 0.3s;
        }
        
        nav ul li a:hover {
            color: var(--secondary);
        }
        
        nav ul li a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: var(--secondary);
            transition: width 0.3s;
        }
        
        nav ul li a:hover::after {
            width: 100%;
        }
        
        .menu-toggle {
            display: none;
            cursor: pointer;
            font-size: 1.5rem;
        }
        
        /* Hero Section */
        .hero {
            height: 100vh;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://i.postimg.cc/3whB0Pwg/photo-1627556704283-452301a45fd0.avif') center/cover no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 0 2rem;
        }
        
        .hero-content {
            max-width: 800px;
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards 0.5s;
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards 0.8s;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--secondary);
            color: white;
            padding: 0.8rem 1.8rem;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.3s, background-color 0.3s, box-shadow 0.3s;
            border: none;
            cursor: pointer;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards 1.1s;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        /* Featured Events Section */
        .section {
            padding: 5rem 5%;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }
        
        .section-title h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .section-title p {
            color: #7f8c8d;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            width: 100px;
            height: 3px;
            background-color: var(--secondary);
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .events-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .event-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            opacity: 0;
            transform: translateY(50px);
        }
        
        .event-card.visible {
            animation: fadeInUp 0.8s forwards;
        }
        
        .event-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .event-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .event-date {
            position: absolute;
            top: 15px;
            left: 15px;
            background-color: var(--secondary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            font-weight: 600;
        }
        
        .event-category {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--accent);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .event-content {
            padding: 1.5rem;
        }
        
        .event-content h3 {
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }
        
        .event-content p {
            color: #7f8c8d;
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .event-details {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
            border-top: 1px solid #ecf0f1;
            padding-top: 1rem;
        }
        
        .event-detail {
            display: flex;
            align-items: center;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .event-detail i {
            margin-right: 0.4rem;
            color: var(--secondary);
        }
        
        /* Categories Section */
        .categories {
            background-color: var(--primary);
            color: white;
            text-align: center;
        }
        
        .categories .section-title::after {
            background-color: var(--accent);
        }
        
        .category-list {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1.5rem;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .category-item {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 1.5rem 2rem;
            border-radius: 10px;
            width: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s, background-color 0.3s;
        }
        
        .category-item:hover {
            background-color: var(--secondary);
            transform: translateY(-10px);
        }
        
        .category-item i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .category-item h3 {
            margin-bottom: 0.5rem;
        }
        
        .category-item p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        
        /* Newsletter Section */
        .newsletter {
            background-color: var(--light);
            text-align: center;
        }
        
        .newsletter-form {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
        }
        
        .newsletter-form input {
            flex: 1;
            min-width: 300px;
            padding: 0.8rem 1.5rem;
            border: 1px solid #ddd;
            border-radius: 30px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .newsletter-form input:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
        }
        
        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 3rem 5%;
        }
        
        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .footer-column h3 {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.8rem;
        }
        
        .footer-column h3::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 2px;
            background-color: var(--secondary);
            bottom: 0;
            left: 0;
        }
        
        .footer-column p {
            line-height: 1.6;
            color: #bdc3c7;
            margin-bottom: 1rem;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.8rem;
        }
        
        .footer-links a {
            color: #bdc3c7;
            text-decoration: none;
            transition: color 0.3s;
            display: flex;
            align-items: center;
        }
        
        .footer-links a i {
            margin-right: 0.5rem;
            color: var(--secondary);
        }
        
        .footer-links a:hover {
            color: var(--secondary);
        }
        
        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            text-decoration: none;
            transition: background-color 0.3s, transform 0.3s;
        }
        
        .social-link:hover {
            background-color: var(--secondary);
            transform: translateY(-5px);
        }
        
        .copyright {
            text-align: center;
            padding: 1.5rem 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 2rem;
            color: #bdc3c7;
            font-size: 0.9rem;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background-color: white;
            width: 90%;
            max-width: 800px;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            transform: scale(0.8);
            transition: transform 0.3s;
        }
        
        .modal.active .modal-content {
            transform: scale(1);
        }
        
        .modal-image {
            height: 300px;
            background-size: cover;
            background-position: center;
        }
        
        .modal-details {
            padding: 2rem;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }
        
        .modal-title h2 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .modal-meta {
            display: flex;
            gap: 1rem;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .modal-meta span {
            display: flex;
            align-items: center;
        }
        
        .modal-meta i {
            margin-right: 0.4rem;
            color: var(--secondary);
        }
        
        .modal-description {
            line-height: 1.8;
            color: #555;
            margin-bottom: 2rem;
        }
        
        .modal-actions {
            display: flex;
            gap: 1rem;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: rgba(255, 255, 255, 0.3);
            color: var(--primary);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .modal-close:hover {
            background-color: rgba(255, 255, 255, 0.8);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-container {
                padding: 1rem;
            }
            
            .menu-toggle {
                display: block;
            }
            
            nav {
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: var(--primary);
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s;
            }
            
            nav.active {
                max-height: 300px;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            }
            
            nav ul {
                flex-direction: column;
                padding: 1rem;
            }
            
            nav ul li {
                margin: 0;
                margin-bottom: 1rem;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .section {
                padding: 3rem 1rem;
            }
            
            .event-card {
                margin-bottom: 2rem;
            }
            
            .category-item {
                width: 150px;
                padding: 1rem;
            }
            
            .newsletter-form input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="header">
        <div class="header-container">
            <div class="logo">UNI<span>VERSE</span></div>
            <div class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </div>
            <nav id="nav">
                <ul>
                    <li><a href="#" class="active">Home</a></li>
                    <li><a href="#">Events</a></li>
                    <li><a href="#">Categories</a></li>
                    <li><a href="#">Calendar</a></li>
                    <li><a href="#">About Us</a></li>
                    <li><a href="{% url 'Student:login'%}">Login</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Discover University Events with UNIVERSE</h1>
            <p>Your ultimate platform for discovering, managing, and enjoying university events all in one place.</p>
            <a href="#" class="btn">Explore Events</a>
        </div>
    </section>

    <!-- Featured Events Section -->
    <section class="section featured-events">
        <div class="section-title">
            <h2>Featured Events</h2>
            <p>Discover the most popular upcoming events across campus</p>
        </div>
        <div class="events-container" id="eventsContainer">
            <!-- Event cards will be added dynamically via JavaScript -->
        </div>
    </section>

    <!-- Categories Section -->
    <section class="section categories">
        <div class="section-title">
            <h2>Event Categories</h2>
            <p>Browse events by your interests</p>
        </div>
        <div class="category-list">
            <div class="category-item">
                <i class="fas fa-music"></i>
                <h3>Music</h3>
                <p>Concerts & performances</p>
            </div>
            <div class="category-item">
                <i class="fas fa-graduation-cap"></i>
                <h3>Academic</h3>
                <p>Lectures & seminars</p>
            </div>
            <div class="category-item">
                <i class="fas fa-trophy"></i>
                <h3>Sports</h3>
                <p>Games & competitions</p>
            </div>
            <div class="category-item">
                <i class="fas fa-theater-masks"></i>
                <h3>Arts</h3>
                <p>Exhibitions & shows</p>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="section newsletter">
        <div class="section-title">
            <h2>Stay Updated</h2>
            <p>Subscribe to our newsletter to get notifications about upcoming events</p>
        </div>
        <form class="newsletter-form" id="newsletterForm">
            <input type="email" placeholder="Your email address" required>
            <button type="submit" class="btn">Subscribe</button>
        </form>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>About UNIVERSE</h3>
                <p>UNIVERSE is the ultimate platform for university event management, helping students and faculty discover and participate in campus events.</p>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Home</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Events</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Categories</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Calendar</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> About Us</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Contact Us</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-map-marker-alt"></i> University Campus, Building A</a></li>
                    <li><a href="#"><i class="fas fa-phone"></i> +1 (555) 123-4567</a></li>
                    <li><a href="#"><i class="fas fa-envelope"></i> info@universe-events.edu</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            &copy; 2025 UNIVERSE. All rights reserved.
        </div>
    </footer>

    <!-- Event Modal -->
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-close" id="modalClose">
                <i class="fas fa-times"></i>
            </div>
            <div class="modal-image" id="modalImage"></div>
            <div class="modal-details">
                <div class="modal-header">
                    <div class="modal-title">
                        <h2 id="modalTitle">Event Title</h2>
                        <div class="modal-meta">
                            <span><i class="far fa-calendar-alt"></i> <span id="modalDate">Date</span></span>
                            <span><i class="fas fa-map-marker-alt"></i> <span id="modalLocation">Location</span></span>
                            <span><i class="fas fa-tag"></i> <span id="modalCategory">Category</span></span>
                        </div>
                    </div>
                </div>
                <div class="modal-description" id="modalDescription">
                    Event description will appear here.
                </div>
                <div class="modal-actions">
                    <a href="#" class="btn" id="modalRegister">Register Now</a>
                    <a href="#" class="btn" style="background-color: #7f8c8d;">Add to Calendar</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample event data
        const events = [
            {
                id: 1,
                title: "Spring Music Festival",
                description: "Join us for the annual Spring Music Festival featuring performances from various university bands, orchestras, and solo artists. This year's theme is 'Harmony in Diversity' celebrating music from around the world.",
                image: "/api/placeholder/400/300",
                date: "April 15, 2025",
                time: "5:00 PM",
                location: "University Amphitheater",
                category: "Music",
                attendees: 256
            },
            {
                id: 2,
                title: "AI and the Future Conference",
                description: "A one-day conference exploring the impact of artificial intelligence on society, business, and education. Featuring keynote speakers from leading tech companies and academic researchers.",
                image: "/api/placeholder/400/300",
                date: "March 28, 2025",
                time: "9:00 AM",
                location: "Science Building, Room 301",
                category: "Academic",
                attendees: 189
            },
            {
                id: 3,
                title: "Campus Basketball Tournament",
                description: "The annual inter-department basketball tournament returns! Cheer for your department team as they compete for the university championship trophy.",
                image: "/api/placeholder/400/300",
                date: "April 2-5, 2025",
                time: "2:00 PM",
                location: "University Sports Complex",
                category: "Sports",
                attendees: 345
            },
            {
                id: 4,
                title: "Student Art Exhibition",
                description: "Showcasing the incredible artwork created by students from the Fine Arts department. Various mediums including painting, sculpture, digital art, and mixed media installations.",
                image: "/api/placeholder/400/300",
                date: "April 10, 2025",
                time: "3:00 PM",
                location: "Arts Building Gallery",
                category: "Arts",
                attendees: 127
            },
            {
                id: 5,
                title: "Career Fair 2025",
                description: "Connect with over 50 potential employers from various industries. Bring your resume and prepare for on-the-spot interviews. Professional attire recommended.",
                image: "/api/placeholder/400/300",
                date: "March 25, 2025",
                time: "10:00 AM",
                location: "University Grand Hall",
                category: "Career",
                attendees: 412
            },
            {
                id: 6,
                title: "Environmental Awareness Workshop",
                description: "Learn about sustainable practices and how to reduce your carbon footprint. Includes hands-on activities and a campus sustainability tour.",
                image: "/api/placeholder/400/300",
                date: "April 22, 2025",
                time: "1:00 PM",
                location: "Environmental Science Center",
                category: "Workshop",
                attendees: 78
            }
        ];

        // DOM Elements
        const eventsContainer = document.getElementById('eventsContainer');
        const modal = document.getElementById('eventModal');
        const modalClose = document.getElementById('modalClose');
        const modalImage = document.getElementById('modalImage');
        const modalTitle = document.getElementById('modalTitle');
        const modalDate = document.getElementById('modalDate');
        const modalLocation = document.getElementById('modalLocation');
        const modalCategory = document.getElementById('modalCategory');
        const modalDescription = document.getElementById('modalDescription');
        const modalRegister = document.getElementById('modalRegister');
        const header = document.getElementById('header');
        const menuToggle = document.getElementById('menuToggle');
        const nav = document.getElementById('nav');
        const newsletterForm = document.getElementById('newsletterForm');

        // Dynamically populate events
        function populateEvents() {
            eventsContainer.innerHTML = '';
            
            events.forEach(event => {
                const eventCard = document.createElement('div');
                eventCard.className = 'event-card';
                eventCard.dataset.id = event.id;
                
                eventCard.innerHTML = `
                    <div class="event-image" style="background-image: url('${event.image}')">
                        <div class="event-date">${event.date.split(',')[0]}</div>
                        <div class="event-category">${event.category}</div>
                    </div>
                    <div class="event-content">
                        <h3>${event.title}</h3>
                        <p>${event.description.substring(0, 100)}...</p>
                        <div class="event-details">
                            <div class="event-detail">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${event.location.split(',')[0]}</span>
                            </div>
                            <div class="event-detail">
                                <i class="fas fa-users"></i>
                                <span>${event.attendees} attending</span>
                            </div>
                        </div>
                    </div>
                `;
                
                eventsContainer.appendChild(eventCard);
                
                // Add click event listener to open modal
                eventCard.addEventListener('click', () => {
                    openEventModal(event);
                });
            });

            // Observe event cards for animation
            observeElements();
        }

        // Open event modal with details
        function openEventModal(event) {
            modalImage.style.backgroundImage = `url('${event.image}')`;
            modalTitle.textContent = event.title;
            modalDate.textContent = `${event.date}, ${event.time}`;
            modalLocation.textContent = event.location;
            modalCategory.textContent = event.category;
            modalDescription.textContent = event.description;
            modalRegister.href = `#register-${event.id}`;
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close event modal
        function closeEventModal() {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Handle scroll for sticky header
        function handleScroll() {
            if (window.scrollY > 100) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        }

        // Toggle mobile menu
function toggleMenu() {
    nav.classList.toggle('active');
}

// Handle newsletter form submission
function handleNewsletterSubmit(e) {
    e.preventDefault();
    const email = e.target.querySelector('input[type="email"]').value;
    
    // Show success message
    const formContainer = e.target.parentElement;
    const successMessage = document.createElement('div');
    successMessage.style.color = '#2ecc71';
    successMessage.style.marginTop = '1rem';
    successMessage.style.fontWeight = '500';
    successMessage.textContent = `Thank you! You've been subscribed with ${email}`;
    
    // Remove any existing message
    const existingMessage = formContainer.querySelector('div[style*="color"]');
    if (existingMessage) {
        formContainer.removeChild(existingMessage);
    }
    
    formContainer.appendChild(successMessage);
    e.target.reset();
    
    // Remove message after 5 seconds
    setTimeout(() => {
        if (formContainer.contains(successMessage)) {
            formContainer.removeChild(successMessage);
        }
    }, 5000);
}

// Observe elements for animation
function observeElements() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });
    
    const eventCards = document.querySelectorAll('.event-card');
    eventCards.forEach(card => {
        observer.observe(card);
    });
}

// Search functionality
function setupSearch() {
    const searchInput = document.createElement('input');
    searchInput.type = 'text';
    searchInput.placeholder = 'Search events...';
    searchInput.className = 'search-input';
    searchInput.style.padding = '0.6rem 1rem';
    searchInput.style.borderRadius = '20px';
    searchInput.style.border = '1px solid #ddd';
    searchInput.style.marginRight = '1rem';
    searchInput.style.outline = 'none';
    searchInput.style.transition = 'border-color 0.3s, box-shadow 0.3s';
    
    // Insert before the menu toggle
    const menuToggle = document.getElementById('menuToggle');
    menuToggle.parentNode.insertBefore(searchInput, menuToggle);
    
    // Style for focus
    searchInput.addEventListener('focus', () => {
        searchInput.style.borderColor = 'var(--secondary)';
        searchInput.style.boxShadow = '0 0 10px rgba(52, 152, 219, 0.3)';
    });
    
    searchInput.addEventListener('blur', () => {
        searchInput.style.borderColor = '#ddd';
        searchInput.style.boxShadow = 'none';
    });
    
    // Search functionality
    searchInput.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        
        const filteredEvents = events.filter(event => 
            event.title.toLowerCase().includes(searchTerm) || 
            event.description.toLowerCase().includes(searchTerm) || 
            event.category.toLowerCase().includes(searchTerm) ||
            event.location.toLowerCase().includes(searchTerm)
        );
        
        // Re-populate events with filtered results
        eventsContainer.innerHTML = '';
        
        if (filteredEvents.length === 0) {
            eventsContainer.innerHTML = `
                <div style="text-align: center; width: 100%; padding: 3rem 0;">
                    <i class="fas fa-search" style="font-size: 3rem; color: #ddd; margin-bottom: 1rem;"></i>
                    <h3>No events found</h3>
                    <p style="color: #7f8c8d;">Try a different search term</p>
                </div>
            `;
            return;
        }
        
        filteredEvents.forEach(event => {
            const eventCard = document.createElement('div');
            eventCard.className = 'event-card visible'; // Add visible class by default for filtered results
            eventCard.dataset.id = event.id;
            
            eventCard.innerHTML = `
                <div class="event-image" style="background-image: url('${event.image}')">
                    <div class="event-date">${event.date.split(',')[0]}</div>
                    <div class="event-category">${event.category}</div>
                </div>
                <div class="event-content">
                    <h3>${event.title}</h3>
                    <p>${event.description.substring(0, 100)}...</p>
                    <div class="event-details">
                        <div class="event-detail">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${event.location.split(',')[0]}</span>
                        </div>
                        <div class="event-detail">
                            <i class="fas fa-users"></i>
                            <span>${event.attendees} attending</span>
                        </div>
                    </div>
                </div>
            `;
            
            eventsContainer.appendChild(eventCard);
            
            // Add click event listener to open modal
            eventCard.addEventListener('click', () => {
                openEventModal(event);
            });
        });
    });
    
    // Add responsive style for mobile
    window.addEventListener('resize', () => {
        if (window.innerWidth <= 768) {
            searchInput.style.display = 'none';
        } else {
            searchInput.style.display = 'block';
        }
    });
    
    // Initial check
    if (window.innerWidth <= 768) {
        searchInput.style.display = 'none';
    }
}

// Dynamic countdown timer for upcoming events
function setupCountdown() {
    const upcomingEvent = events.sort((a, b) => {
        const dateA = new Date(a.date + ' ' + a.time);
        const dateB = new Date(b.date + ' ' + b.time);
        return dateA - dateB;
    })[0]; // Get the nearest upcoming event
    
    // Create countdown element
    const countdownSection = document.createElement('div');
    countdownSection.className = 'countdown-section';
    countdownSection.style.background = 'linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url(\'/api/placeholder/1200/300\') center/cover no-repeat';
    countdownSection.style.color = 'white';
    countdownSection.style.padding = '3rem 1rem';
    countdownSection.style.textAlign = 'center';
    
    // Insert after hero section
    const heroSection = document.querySelector('.hero');
    heroSection.parentNode.insertBefore(countdownSection, heroSection.nextSibling);
    
    // Setup countdown content
    countdownSection.innerHTML = `
        <h2 style="margin-bottom: 1rem; font-size: 2rem;">Next Event: ${upcomingEvent.title}</h2>
        <p style="margin-bottom: 2rem; color: #bdc3c7;">${upcomingEvent.date} at ${upcomingEvent.time} | ${upcomingEvent.location}</p>
        <div class="countdown-timer" style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 2rem;">
            <div class="countdown-item">
                <div class="countdown-value" id="countdown-days" style="font-size: 3rem; font-weight: 700; color: var(--secondary);">00</div>
                <div class="countdown-label" style="text-transform: uppercase; font-size: 0.9rem; color: #bdc3c7;">Days</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-value" id="countdown-hours" style="font-size: 3rem; font-weight: 700; color: var(--secondary);">00</div>
                <div class="countdown-label" style="text-transform: uppercase; font-size: 0.9rem; color: #bdc3c7;">Hours</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-value" id="countdown-minutes" style="font-size: 3rem; font-weight: 700; color: var(--secondary);">00</div>
                <div class="countdown-label" style="text-transform: uppercase; font-size: 0.9rem; color: #bdc3c7;">Minutes</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-value" id="countdown-seconds" style="font-size: 3rem; font-weight: 700; color: var(--secondary);">00</div>
                <div class="countdown-label" style="text-transform: uppercase; font-size: 0.9rem; color: #bdc3c7;">Seconds</div>
            </div>
        </div>
        <a href="#" class="btn" onclick="openEventModal(events.find(e => e.id === ${upcomingEvent.id})); return false;">Register Now</a>
    `;
    
    // Update countdown timer
    const eventDate = new Date(upcomingEvent.date + ' ' + upcomingEvent.time);
    
    function updateCountdown() {
        const now = new Date();
        const diff = eventDate - now;
        
        if (diff <= 0) {
            document.getElementById('countdown-days').textContent = '00';
            document.getElementById('countdown-hours').textContent = '00';
            document.getElementById('countdown-minutes').textContent = '00';
            document.getElementById('countdown-seconds').textContent = '00';
            return;
        }
        
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        document.getElementById('countdown-days').textContent = days.toString().padStart(2, '0');
        document.getElementById('countdown-hours').textContent = hours.toString().padStart(2, '0');
        document.getElementById('countdown-minutes').textContent = minutes.toString().padStart(2, '0');
        document.getElementById('countdown-seconds').textContent = seconds.toString().padStart(2, '0');
    }
    
    // Initial update and set interval
    updateCountdown();
    setInterval(updateCountdown, 1000);
}

// Event calendar preview
function setupCalendarPreview() {
    const today = new Date();
    const currentMonth = today.getMonth();
    const currentYear = today.getFullYear();
    
    // Create calendar element
    const calendarSection = document.createElement('section');
    calendarSection.className = 'section calendar-preview';
    calendarSection.innerHTML = `
        <div class="section-title">
            <h2>Events Calendar</h2>
            <p>Quick preview of this month's events</p>
        </div>
        <div class="calendar-container" style="max-width: 900px; margin: 0 auto; background-color: white; border-radius: 10px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); overflow: hidden;">
            <div class="calendar-header" style="background-color: var(--primary); color: white; padding: 1.5rem; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; font-size: 1.5rem;">${new Date(currentYear, currentMonth).toLocaleString('default', { month: 'long' })} ${currentYear}</h3>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="calendar-nav-btn" style="background-color: rgba(255, 255, 255, 0.1); border: none; color: white; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="calendar-nav-btn" style="background-color: rgba(255, 255, 255, 0.1); border: none; color: white; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            <div class="calendar-body" style="padding: 1.5rem;">
                <div class="calendar-days" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem; text-align: center; margin-bottom: 1rem;">
                    <div style="font-weight: 600; color: var(--primary);">Sun</div>
                    <div style="font-weight: 600; color: var(--primary);">Mon</div>
                    <div style="font-weight: 600; color: var(--primary);">Tue</div>
                    <div style="font-weight: 600; color: var(--primary);">Wed</div>
                    <div style="font-weight: 600; color: var(--primary);">Thu</div>
                    <div style="font-weight: 600; color: var(--primary);">Fri</div>
                    <div style="font-weight: 600; color: var(--primary);">Sat</div>
                </div>
                <div class="calendar-dates" id="calendarDates" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem;">
                    <!-- Calendar dates will be filled by JavaScript -->
                </div>
            </div>
        </div>
        <div style="text-align: center; margin-top: 2rem;">
            <a href="#" class="btn">View Full Calendar</a>
        </div>
    `;
    
    // Insert before newsletter section
    const newsletterSection = document.querySelector('.newsletter');
    newsletterSection.parentNode.insertBefore(calendarSection, newsletterSection);
    
    // Generate calendar dates
    function generateCalendarDates(year, month) {
        const calendarDates = document.getElementById('calendarDates');
        calendarDates.innerHTML = '';
        
        // Get first day of month and total days
        const firstDay = new Date(year, month, 1).getDay();
        const totalDays = new Date(year, month + 1, 0).getDate();
        
        // Create empty cells for days before the first of the month
        for (let i = 0; i < firstDay; i++) {
            const emptyCell = document.createElement('div');
            emptyCell.style.height = '40px';
            calendarDates.appendChild(emptyCell);
        }
        
        // Parse event dates to identify event days
        const eventDays = events.map(event => {
            const eventDate = new Date(event.date);
            if (eventDate.getMonth() === month && eventDate.getFullYear() === year) {
                return {
                    day: eventDate.getDate(),
                    id: event.id,
                    title: event.title
                };
            }
            return null;
        }).filter(Boolean);
        
        // Create calendar day cells
        for (let day = 1; day <= totalDays; day++) {
            const dayCell = document.createElement('div');
            dayCell.style.height = '40px';
            dayCell.style.display = 'flex';
            dayCell.style.alignItems = 'center';
            dayCell.style.justifyContent = 'center';
            dayCell.style.position = 'relative';
            dayCell.style.cursor = 'pointer';
            dayCell.style.borderRadius = '50%';
            
            // Check if this day has an event
            const eventOnDay = eventDays.find(eventDay => eventDay.day === day);
            
            if (eventOnDay) {
                dayCell.style.backgroundColor = 'var(--secondary)';
                dayCell.style.color = 'white';
                dayCell.style.fontWeight = '600';
                
                // Add tooltip for event title
                dayCell.title = eventOnDay.title;
                
                // Add click event to open modal
                dayCell.addEventListener('click', () => {
                    const event = events.find(e => e.id === eventOnDay.id);
                    if (event) {
                        openEventModal(event);
                    }
                });
            }
            
            // Check if this day is today
            const today = new Date();
            if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                if (!eventOnDay) {
                    dayCell.style.border = '2px solid var(--secondary)';
                } else {
                    dayCell.style.boxShadow = '0 0 0 2px white, 0 0 0 4px var(--secondary)';
                }
            }
            
            dayCell.textContent = day;
            calendarDates.appendChild(dayCell);
        }
    }
    
    // Initialize calendar
    generateCalendarDates(currentYear, currentMonth);
    
    // Add event listeners to calendar navigation buttons
    const navButtons = document.querySelectorAll('.calendar-nav-btn');
    let displayMonth = currentMonth;
    let displayYear = currentYear;
    
    navButtons[0].addEventListener('click', () => {
        displayMonth--;
        if (displayMonth < 0) {
            displayMonth = 11;
            displayYear--;
        }
        updateCalendarHeader();
        generateCalendarDates(displayYear, displayMonth);
    });
    
    navButtons[1].addEventListener('click', () => {
        displayMonth++;
        if (displayMonth > 11) {
            displayMonth = 0;
            displayYear++;
        }
        updateCalendarHeader();
        generateCalendarDates(displayYear, displayMonth);
    });
    
    function updateCalendarHeader() {
        const calendarHeader = document.querySelector('.calendar-header h3');
        calendarHeader.textContent = `${new Date(displayYear, displayMonth).toLocaleString('default', { month: 'long' })} ${displayYear}`;
    }
}

// Initialize everything on load
document.addEventListener('DOMContentLoaded', () => {
    populateEvents();
    setupSearch();
    setupCountdown();
    setupCalendarPreview();
    
    // Event listeners
    window.addEventListener('scroll', handleScroll);
    menuToggle.addEventListener('click', toggleMenu);
    modalClose.addEventListener('click', closeEventModal);
    newsletterForm.addEventListener('submit', handleNewsletterSubmit);
    
    // Close modal when clicking outside content
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeEventModal();
        }
    });
});